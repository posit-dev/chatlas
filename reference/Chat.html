<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>chat – chatlas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/posit-logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-0c8af03b2fbd4cf44d6703e337af0e8d.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-27f49594169cb862f7f7a95211b10a80.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta property="og:title" content="chatlas">
<meta property="og:description" content="A streamlined Python interface to various LLMs.">
<meta property="og:image" content="https://posit-dev.github.io/chatlas/reference/images/logo.png">
<meta property="og:site_name" content="chatlas">
<meta name="twitter:title" content="chatlas">
<meta name="twitter:description" content="A streamlined Python interface to various LLMs.">
<meta name="twitter:image" content="https://posit-dev.github.io/chatlas/reference/images/logo.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">chatlas</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../get-started.html"> 
<span class="menu-text">Get Started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../reference/index.html" aria-current="page"> 
<span class="menu-text">Reference</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-articles" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Articles</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-articles">    
        <li>
    <a class="dropdown-item" href="../prompt-design.html">
 <span class="dropdown-text">Prompt design</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../structured-data.html">
 <span class="dropdown-text">Structured data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../tool-calling.html">
 <span class="dropdown-text">Tool (function) calling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../web-apps.html">
 <span class="dropdown-text">Build a chatbot</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../rag.html">
 <span class="dropdown-text">Retrieval-Augmented Generation (RAG)</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/posit-dev/chatlas"> <i class="bi bi-github" role="img" aria-label="GitHub repository">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../reference/Chat.html">The chat object</a></li><li class="breadcrumb-item"><a href="../reference/Chat.html">Chat</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Function reference</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Chat model providers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatAnthropic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatAnthropic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatAuto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatAuto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatAzureOpenAI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatAzureOpenAI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatBedrockAnthropic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatBedrockAnthropic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatGithub.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatGithub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatGoogle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatGoogle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatGroq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatGroq</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatOllama.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatOllama</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatOpenAI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatOpenAI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatPerplexity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatPerplexity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatSnowflake.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatSnowflake</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatVertex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatVertex</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">The chat object</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Chat.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Chat</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Image input</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_image_file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_image_file</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_image_plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_image_plot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_image_url.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_image_url</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">PDF input</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_pdf_file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_pdf_file</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_pdf_url.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_pdf_url</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Prompt interpolation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/interpolate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">interpolate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/interpolate_file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">interpolate_file</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Tool calling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Tool.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tool</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Turns</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Turn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Turn</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Query token usage</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/token_usage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">token_usage</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Implement a model provider</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Provider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Provider</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">User-facing types</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.Content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.Content</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentImage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentImage</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentImageInline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentImageInline</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentImageRemote.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentImageRemote</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentJson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentJson</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentText.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentText</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentToolRequest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentToolRequest</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentToolResult.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentToolResult</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ChatResponse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ChatResponse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ChatResponseAsync.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ChatResponseAsync</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ImageContentTypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ImageContentTypes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.MISSING_TYPE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.MISSING_TYPE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.MISSING.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.MISSING</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.SubmitInputArgsT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.SubmitInputArgsT</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.TokenUsage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.TokenUsage</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chatlas.Chat" id="toc-chatlas.Chat" class="nav-link active" data-scroll-target="#chatlas.Chat">Chat</a>
  <ul class="collapse">
  <li><a href="#attributes" id="toc-attributes" class="nav-link" data-scroll-target="#attributes">Attributes</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a>
  <ul class="collapse">
  <li><a href="#chatlas.Chat.app" id="toc-chatlas.Chat.app" class="nav-link" data-scroll-target="#chatlas.Chat.app">app</a></li>
  <li><a href="#chatlas.Chat.chat" id="toc-chatlas.Chat.chat" class="nav-link" data-scroll-target="#chatlas.Chat.chat">chat</a></li>
  <li><a href="#chatlas.Chat.chat_async" id="toc-chatlas.Chat.chat_async" class="nav-link" data-scroll-target="#chatlas.Chat.chat_async">chat_async</a></li>
  <li><a href="#chatlas.Chat.console" id="toc-chatlas.Chat.console" class="nav-link" data-scroll-target="#chatlas.Chat.console">console</a></li>
  <li><a href="#chatlas.Chat.export" id="toc-chatlas.Chat.export" class="nav-link" data-scroll-target="#chatlas.Chat.export">export</a></li>
  <li><a href="#chatlas.Chat.extract_data" id="toc-chatlas.Chat.extract_data" class="nav-link" data-scroll-target="#chatlas.Chat.extract_data">extract_data</a></li>
  <li><a href="#chatlas.Chat.extract_data_async" id="toc-chatlas.Chat.extract_data_async" class="nav-link" data-scroll-target="#chatlas.Chat.extract_data_async">extract_data_async</a></li>
  <li><a href="#chatlas.Chat.get_last_turn" id="toc-chatlas.Chat.get_last_turn" class="nav-link" data-scroll-target="#chatlas.Chat.get_last_turn">get_last_turn</a></li>
  <li><a href="#chatlas.Chat.get_turns" id="toc-chatlas.Chat.get_turns" class="nav-link" data-scroll-target="#chatlas.Chat.get_turns">get_turns</a></li>
  <li><a href="#chatlas.Chat.register_tool" id="toc-chatlas.Chat.register_tool" class="nav-link" data-scroll-target="#chatlas.Chat.register_tool">register_tool</a></li>
  </ul></li>
  <li><a href="#parameters-9" id="toc-parameters-9" class="nav-link" data-scroll-target="#parameters-9">Parameters</a>
  <ul class="collapse">
  <li><a href="#chatlas.Chat.set_echo_options" id="toc-chatlas.Chat.set_echo_options" class="nav-link" data-scroll-target="#chatlas.Chat.set_echo_options">set_echo_options</a></li>
  <li><a href="#chatlas.Chat.set_turns" id="toc-chatlas.Chat.set_turns" class="nav-link" data-scroll-target="#chatlas.Chat.set_turns">set_turns</a></li>
  <li><a href="#chatlas.Chat.stream" id="toc-chatlas.Chat.stream" class="nav-link" data-scroll-target="#chatlas.Chat.stream">stream</a></li>
  <li><a href="#chatlas.Chat.stream_async" id="toc-chatlas.Chat.stream_async" class="nav-link" data-scroll-target="#chatlas.Chat.stream_async">stream_async</a></li>
  <li><a href="#chatlas.Chat.token_count" id="toc-chatlas.Chat.token_count" class="nav-link" data-scroll-target="#chatlas.Chat.token_count">token_count</a></li>
  <li><a href="#chatlas.Chat.token_count_async" id="toc-chatlas.Chat.token_count_async" class="nav-link" data-scroll-target="#chatlas.Chat.token_count_async">token_count_async</a></li>
  <li><a href="#chatlas.Chat.tokens" id="toc-chatlas.Chat.tokens" class="nav-link" data-scroll-target="#chatlas.Chat.tokens">tokens</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/posit-dev/chatlas/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/posit-dev/chatlas/edit/main/docs/reference/Chat.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="chatlas.Chat" class="level1">
<h1>Chat</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Chat(<span class="va">self</span>, provider, turns<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A chat object that can be used to interact with a language model.</p>
<p>A <code>Chat</code> is an sequence of sequence of user and assistant <a href="../reference/Turn.html#chatlas.Turn"><code>Turn</code></a>s sent to a specific <a href="../reference/Provider.html#chatlas.Provider"><code>Provider</code></a>. A <code>Chat</code> takes care of managing the state associated with the chat; i.e.&nbsp;it records the messages that you send to the server, and the messages that you receive back. If you register a tool (i.e.&nbsp;an function that the assistant can call on your behalf), it also takes care of the tool loop.</p>
<p>You should generally not create this object yourself, but instead call <a href="../reference/ChatOpenAI.html#chatlas.ChatOpenAI"><code>ChatOpenAI</code></a> or friends instead.</p>
<section id="attributes" class="level2">
<h2 class="anchored" data-anchor-id="attributes">Attributes</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#chatlas.Chat.system_prompt">system_prompt</a></td>
<td>A property to get (or set) the system prompt for the chat.</td>
</tr>
</tbody>
</table>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#chatlas.Chat.app">app</a></td>
<td>Enter a web-based chat app to interact with the LLM.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.chat">chat</a></td>
<td>Generate a response from the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.chat_async">chat_async</a></td>
<td>Generate a response from the chat asynchronously.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.console">console</a></td>
<td>Enter a chat console to interact with the LLM.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.export">export</a></td>
<td>Export the chat history to a file.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.extract_data">extract_data</a></td>
<td>Extract structured data from the given input.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.extract_data_async">extract_data_async</a></td>
<td>Extract structured data from the given input asynchronously.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.get_last_turn">get_last_turn</a></td>
<td>Get the last turn in the chat with a specific role.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.get_turns">get_turns</a></td>
<td>Get all the turns (i.e., message contents) in the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.register_tool">register_tool</a></td>
<td>Register a tool (function) with the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.set_echo_options">set_echo_options</a></td>
<td>Set echo styling options for the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.set_turns">set_turns</a></td>
<td>Set the turns of the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.stream">stream</a></td>
<td>Generate a response from the chat in a streaming fashion.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.stream_async">stream_async</a></td>
<td>Generate a response from the chat in a streaming fashion asynchronously.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.token_count">token_count</a></td>
<td>Get an estimated token count for the given input.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.token_count_async">token_count_async</a></td>
<td>Get an estimated token count for the given input asynchronously.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.tokens">tokens</a></td>
<td>Get the tokens for each turn in the chat.</td>
</tr>
</tbody>
</table>
<section id="chatlas.Chat.app" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.app">app</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Chat.app(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    stream<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    port<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    launch_browser<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    bg_thread<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    echo<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Enter a web-based chat app to interact with the LLM.</p>
<section id="parameters" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>port</td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a></td>
<td>The port to run the app on (the default is 0, which will choose a random port).</td>
<td><code>0</code></td>
</tr>
<tr class="odd">
<td>launch_browser</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to launch a browser window.</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>bg_thread</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</td>
<td>Whether to run the app in a background thread. If <code>None</code>, the app will run in a background thread if the current environment is a notebook.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']]</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content. Defaults to <code>"none"</code> when <code>stream=True</code> and <code>"text"</code> when <code>stream=False</code>.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="../reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.chat" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.chat">chat</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Chat.chat(<span class="op">*</span>args, echo<span class="op">=</span><span class="st">'text'</span>, stream<span class="op">=</span><span class="va">True</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat.</p>
<section id="parameters-1" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-1">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content.</td>
<td><code>'text'</code></td>
</tr>
<tr class="odd">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="../reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="../reference/types.ChatResponse.html#chatlas.types.ChatResponse">ChatResponse</a></td>
<td>A (consumed) response from the chat. Apply <code>str()</code> to this object to get the text content of the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.chat_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.chat_async">chat_async</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Chat.chat_async(<span class="op">*</span>args, echo<span class="op">=</span><span class="st">'text'</span>, stream<span class="op">=</span><span class="va">True</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat asynchronously.</p>
<section id="parameters-2" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-2">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls, images, etc), or no content.</td>
<td><code>'text'</code></td>
</tr>
<tr class="odd">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="../reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-1" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-1">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="../reference/types.ChatResponseAsync.html#chatlas.types.ChatResponseAsync">ChatResponseAsync</a></td>
<td>A (consumed) response from the chat. Apply <code>str()</code> to this object to get the text content of the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.console" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.console">console</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Chat.console(echo<span class="op">=</span><span class="st">'text'</span>, stream<span class="op">=</span><span class="va">True</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Enter a chat console to interact with the LLM.</p>
<p>To quit, input ‘exit’ or press Ctrl+C.</p>
<section id="parameters-3" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-3">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content.</td>
<td><code>'text'</code></td>
</tr>
<tr class="even">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="../reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-2" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-2">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>None</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.export" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.export">export</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Chat.export(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    filename,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    turns<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    include<span class="op">=</span><span class="st">'text'</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    include_system_prompt<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    overwrite<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Export the chat history to a file.</p>
<section id="parameters-4" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-4">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>filename</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></td>
<td>The filename to export the chat to. Currently this must be a <code>.md</code> or <code>.html</code> file.</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>turns</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="../reference/Turn.html#chatlas.Turn">Turn</a>]]</td>
<td>The <code>.get_turns()</code> to export. If not provided, the chat’s current turns will be used.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>title</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>A title to place at the top of the exported file.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>overwrite</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to overwrite the file if it already exists.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td>include</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all']</td>
<td>Whether to include text content, all content (i.e., tool calls), or no content.</td>
<td><code>'text'</code></td>
</tr>
<tr class="even">
<td>include_system_prompt</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to include the system prompt in a </td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-3" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-3">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></td>
<td>The path to the exported file.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.extract_data" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.extract_data">extract_data</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Chat.extract_data(<span class="op">*</span>args, data_model, echo<span class="op">=</span><span class="st">'none'</span>, stream<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Extract structured data from the given input.</p>
<section id="parameters-5" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-5">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to extract data from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]</td>
<td>A Pydantic model describing the structure of the data to extract.</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="even">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-4" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-4">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</td>
<td>The extracted data.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.extract_data_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.extract_data_async">extract_data_async</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Chat.extract_data_async(<span class="op">*</span>args, data_model, echo<span class="op">=</span><span class="st">'none'</span>, stream<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Extract structured data from the given input asynchronously.</p>
<section id="parameters-6" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-6">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to extract data from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]</td>
<td>A Pydantic model describing the structure of the data to extract.</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content</td>
<td><code>'none'</code></td>
</tr>
<tr class="even">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks). Defaults to <code>True</code> if <code>echo</code> is not “none”.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-5" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-5">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</td>
<td>The extracted data.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_last_turn" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_last_turn">get_last_turn</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Chat.get_last_turn(role<span class="op">=</span><span class="st">'assistant'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get the last turn in the chat with a specific role.</p>
<section id="parameters-7" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-7">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>role</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['assistant', 'user', 'system']</td>
<td>The role of the turn to return.</td>
<td><code>'assistant'</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_turns" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_turns">get_turns</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Chat.get_turns(include_system_prompt<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get all the turns (i.e., message contents) in the chat.</p>
<section id="parameters-8" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-8">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>include_system_prompt</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to include the system prompt in the turns.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.register_tool" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.register_tool">register_tool</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Chat.register_tool(func, <span class="op">*</span>, model<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register a tool (function) with the chat.</p>
<p>The function will always be invoked in the current Python process.</p>
<section id="examples" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples">Examples</h4>
<p>If your tool has straightforward input parameters, you can just register the function directly (type hints and a docstring explaning both what the function does and what the parameters are for is strongly recommended):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatOpenAI, Tool</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a: <span class="bu">int</span>, b: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Add two numbers together.</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">####     Parameters {.doc-section .doc-section-----parameters}</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co">    a : int</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="co">        The first number to add.</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co">    b : int</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">        The second number to add.</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatOpenAI()</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>chat.register_tool(add)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>chat.chat(<span class="st">"What is 2 + 2?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If your tool has more complex input parameters, you can provide a Pydantic model that corresponds to the input parameters for the function, This way, you can have fields that hold other model(s) (for more complex input parameters), and also more directly document the input parameters:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatOpenAI, Tool</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, Field</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AddParams(BaseModel):</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Add two numbers together.'''</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"The first number to add."</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">int</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"The second number to add."</span>)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a: <span class="bu">int</span>, b: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatOpenAI()</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>chat.register_tool(add, model<span class="op">=</span>AddParams)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>chat.chat(<span class="st">"What is 2 + 2?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="parameters-9" class="level2">
<h2 class="anchored" data-anchor-id="parameters-9">Parameters</h2>
<p>func The function to be invoked when the tool is called. model A Pydantic model that describes the input parameters for the function. If not provided, the model will be inferred from the function’s type hints. The primary reason why you might want to provide a model in Note that the name and docstring of the model takes precedence over the name and docstring of the function.</p>
<section id="chatlas.Chat.set_echo_options" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.set_echo_options">set_echo_options</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Chat.set_echo_options(rich_markdown<span class="op">=</span><span class="va">None</span>, rich_console<span class="op">=</span><span class="va">None</span>, css_styles<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Set echo styling options for the chat.</p>
<section id="parameters-10" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-10">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>rich_markdown</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</td>
<td>A dictionary of options to pass to <code>rich.markdown.Markdown()</code>. This is only relevant when outputting to the console.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>rich_console</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</td>
<td>A dictionary of options to pass to <code>rich.console.Console()</code>. This is only relevant when outputting to the console.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>css_styles</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</td>
<td>A dictionary of CSS styles to apply to <code>IPython.display.Markdown()</code>. This is only relevant when outputing to the browser.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.set_turns" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.set_turns">set_turns</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Chat.set_turns(turns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Set the turns of the chat.</p>
<p>This method is primarily useful for clearing or setting the turns of the chat (i.e., limiting the context window).</p>
<section id="parameters-11" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-11">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>turns</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="../reference/Turn.html#chatlas.Turn">Turn</a>]</td>
<td>The turns to set. Turns with the role “system” are not allowed.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.stream" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.stream">stream</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Chat.stream(<span class="op">*</span>args, echo<span class="op">=</span><span class="st">'none'</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat in a streaming fashion.</p>
<section id="parameters-12" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-12">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="../reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-6" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-6">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="../reference/types.ChatResponse.html#chatlas.types.ChatResponse">ChatResponse</a></td>
<td>An (unconsumed) response from the chat. Iterate over this object to consume the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.stream_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.stream_async">stream_async</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Chat.stream_async(<span class="op">*</span>args, echo<span class="op">=</span><span class="st">'none'</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat in a streaming fashion asynchronously.</p>
<section id="parameters-13" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-13">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all', 'none']</td>
<td>Whether to echo text content, all content (i.e., tool calls), or no content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="../reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-7" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-7">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="../reference/types.ChatResponseAsync.html#chatlas.types.ChatResponseAsync">ChatResponseAsync</a></td>
<td>An (unconsumed) response from the chat. Iterate over this object to consume the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.token_count" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.token_count">token_count</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Chat.token_count(<span class="op">*</span>args, data_model<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get an estimated token count for the given input.</p>
<p>Estimate the token size of input content. This can help determine whether input(s) and/or conversation history (i.e., <code>.get_turns()</code>) should be reduced in size before sending it to the model.</p>
<section id="parameters-14" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-14">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to get a token count for.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]]</td>
<td>If the input is meant for data extraction (i.e., <code>.extract_data()</code>), then this should be the Pydantic model that describes the structure of the data to extract.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-8" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-8">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a></td>
<td>The token count for the input.</td>
</tr>
</tbody>
</table>
</section>
<section id="note" class="level4 doc-section doc-section-note">
<h4 class="doc-section doc-section-note anchored" data-anchor-id="note">Note</h4>
<p>Remember that the token count is an estimate. Also, models based on <code>ChatOpenAI()</code> currently does not take tools into account when estimating token counts.</p>
</section>
<section id="examples-1" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-1">Examples</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatAnthropic</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatAnthropic()</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate the token count before sending the input</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(chat.token_count(<span class="st">"What is 2 + 2?"</span>))</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Once input is sent, you can get the actual input and output</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># token counts from the chat object</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>chat.chat(<span class="st">"What is 2 + 2?"</span>, echo<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(chat.token_usage())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="chatlas.Chat.token_count_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.token_count_async">token_count_async</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>Chat.token_count_async(<span class="op">*</span>args, data_model<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get an estimated token count for the given input asynchronously.</p>
<p>Estimate the token size of input content. This can help determine whether input(s) and/or conversation history (i.e., <code>.get_turns()</code>) should be reduced in size before sending it to the model.</p>
<section id="parameters-15" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-15">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="../reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to get a token count for.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]]</td>
<td>If this input is meant for data extraction (i.e., <code>.extract_data_async()</code>), then this should be the Pydantic model that describes the structure of the data to extract.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-9" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-9">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a></td>
<td>The token count for the input.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.tokens" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.tokens">tokens</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>Chat.tokens(values<span class="op">=</span><span class="st">'discrete'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get the tokens for each turn in the chat.</p>
<section id="parameters-16" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-16">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>values</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['cumulative', 'discrete']</td>
<td>If “cumulative” (the default), the result can be summed to get the chat’s overall token usage (helpful for computing overall cost of the chat). If “discrete”, the result can be summed to get the number of tokens the turns will cost to generate the next response (helpful for estimating cost of the next response, or for determining if you are about to exceed the token limit).</td>
<td><code>'discrete'</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-10" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-10">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a href="https://docs.python.org/3/library/functions.html#int">int</a>]</td>
<td>A list of token counts for each (non-system) turn in the chat. The 1st turn includes the tokens count for the system prompt (if any).</td>
</tr>
</tbody>
</table>
</section>
<section id="raises" class="level4 doc-section doc-section-raises">
<h4 class="doc-section doc-section-raises anchored" data-anchor-id="raises">Raises</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></td>
<td>If the chat’s turns (i.e., <code>.get_turns()</code>) are not in an expected format. This may happen if the chat history is manually set (i.e., <code>.set_turns()</code>). In this case, you can inspect the “raw” token values via the <code>.get_turns()</code> method (each turn has a <code>.tokens</code> attribute).</td>
</tr>
</tbody>
</table>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/posit-dev\.github\.io\/chatlas\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Proudly supported by <a href="https://posit.co"><img src="https://posit.co/wp-content/uploads/2024/06/Posit-Logos-2024_horiz-full-color.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/posit-dev/chatlas/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/posit-dev/chatlas/edit/main/docs/reference/Chat.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>