<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>chat – chatlas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../reference/content_image_file.html" rel="next">
<link href="../reference/ChatVertex.html" rel="prev">
<link href="../images/posit-logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-441cf8784b515adac1424855ab078ac0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-cf9289e79690e31abfd808b53678e2bf.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<meta property="og:title" content="chatlas">
<meta property="og:description" content="Your friendly guide to building LLM chat apps in Python with less effort and more clarity.">
<meta property="og:image" content="https://posit-dev.github.io/chatlas/reference/images/logo.png">
<meta property="og:site_name" content="chatlas">
<meta name="twitter:title" content="chatlas">
<meta name="twitter:description" content="Your friendly guide to building LLM chat apps in Python with less effort and more clarity.">
<meta name="twitter:image" content="https://posit-dev.github.io/chatlas/reference/images/logo.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title"><img src="../logos/small/logo.png" height="40px" alt="chatlas website"><span class="ms-3 fs-3 lead header" style="vertical-align:middle;">chatlas</span></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../reference/index.html" aria-current="page"> 
<span class="menu-text">Reference</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/posit-dev/chatlas"> <i class="bi bi-github" role="img" aria-label="GitHub repository">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../reference/Chat.html">The chat object</a></li><li class="breadcrumb-item"><a href="../reference/Chat.html">Chat</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Function reference</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Chat model providers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatAnthropic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatAnthropic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatAuto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatAuto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatAzureOpenAI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatAzureOpenAI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatBedrockAnthropic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatBedrockAnthropic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatDatabricks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatDatabricks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatGithub.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatGithub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatGoogle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatGoogle</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatGroq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatGroq</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatOllama.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatOllama</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatOpenAI.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatOpenAI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatPerplexity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatPerplexity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatSnowflake.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatSnowflake</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ChatVertex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ChatVertex</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">The chat object</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Chat.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Chat</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Image input</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_image_file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_image_file</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_image_plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_image_plot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_image_url.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_image_url</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">PDF input</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_pdf_file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_pdf_file</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/content_pdf_url.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">content_pdf_url</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Prompt interpolation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/interpolate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">interpolate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/interpolate_file.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">interpolate_file</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Tool calling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Tool.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tool</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/ToolRejectError.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ToolRejectError</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Turns</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Turn.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Turn</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Query token usage</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/token_usage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">token_usage</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Implement a model provider</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/Provider.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Provider</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">User-facing types</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.Content.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.Content</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentImage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentImage</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentImageInline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentImageInline</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentImageRemote.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentImageRemote</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentJson.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentJson</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentText.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentText</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentToolRequest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentToolRequest</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ContentToolResult.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ContentToolResult</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ChatResponse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ChatResponse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ChatResponseAsync.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ChatResponseAsync</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.ImageContentTypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.ImageContentTypes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.MISSING_TYPE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.MISSING_TYPE</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.MISSING.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.MISSING</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.SubmitInputArgsT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.SubmitInputArgsT</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../reference/types.TokenUsage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">types.TokenUsage</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chatlas.Chat" id="toc-chatlas.Chat" class="nav-link active" data-scroll-target="#chatlas.Chat">Chat</a>
  <ul class="collapse">
  <li><a href="#attributes" id="toc-attributes" class="nav-link" data-scroll-target="#attributes">Attributes</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods">Methods</a>
  <ul class="collapse">
  <li><a href="#chatlas.Chat.add_turn" id="toc-chatlas.Chat.add_turn" class="nav-link" data-scroll-target="#chatlas.Chat.add_turn">add_turn</a></li>
  <li><a href="#chatlas.Chat.app" id="toc-chatlas.Chat.app" class="nav-link" data-scroll-target="#chatlas.Chat.app">app</a></li>
  <li><a href="#chatlas.Chat.chat" id="toc-chatlas.Chat.chat" class="nav-link" data-scroll-target="#chatlas.Chat.chat">chat</a></li>
  <li><a href="#chatlas.Chat.chat_async" id="toc-chatlas.Chat.chat_async" class="nav-link" data-scroll-target="#chatlas.Chat.chat_async">chat_async</a></li>
  <li><a href="#chatlas.Chat.cleanup_mcp_tools" id="toc-chatlas.Chat.cleanup_mcp_tools" class="nav-link" data-scroll-target="#chatlas.Chat.cleanup_mcp_tools">cleanup_mcp_tools</a></li>
  <li><a href="#chatlas.Chat.console" id="toc-chatlas.Chat.console" class="nav-link" data-scroll-target="#chatlas.Chat.console">console</a></li>
  <li><a href="#chatlas.Chat.export" id="toc-chatlas.Chat.export" class="nav-link" data-scroll-target="#chatlas.Chat.export">export</a></li>
  <li><a href="#chatlas.Chat.extract_data" id="toc-chatlas.Chat.extract_data" class="nav-link" data-scroll-target="#chatlas.Chat.extract_data">extract_data</a></li>
  <li><a href="#chatlas.Chat.extract_data_async" id="toc-chatlas.Chat.extract_data_async" class="nav-link" data-scroll-target="#chatlas.Chat.extract_data_async">extract_data_async</a></li>
  <li><a href="#chatlas.Chat.get_cost" id="toc-chatlas.Chat.get_cost" class="nav-link" data-scroll-target="#chatlas.Chat.get_cost">get_cost</a></li>
  <li><a href="#chatlas.Chat.get_last_turn" id="toc-chatlas.Chat.get_last_turn" class="nav-link" data-scroll-target="#chatlas.Chat.get_last_turn">get_last_turn</a></li>
  <li><a href="#chatlas.Chat.get_tokens" id="toc-chatlas.Chat.get_tokens" class="nav-link" data-scroll-target="#chatlas.Chat.get_tokens">get_tokens</a></li>
  <li><a href="#chatlas.Chat.get_tools" id="toc-chatlas.Chat.get_tools" class="nav-link" data-scroll-target="#chatlas.Chat.get_tools">get_tools</a></li>
  <li><a href="#chatlas.Chat.get_turns" id="toc-chatlas.Chat.get_turns" class="nav-link" data-scroll-target="#chatlas.Chat.get_turns">get_turns</a></li>
  <li><a href="#chatlas.Chat.on_tool_request" id="toc-chatlas.Chat.on_tool_request" class="nav-link" data-scroll-target="#chatlas.Chat.on_tool_request">on_tool_request</a></li>
  <li><a href="#chatlas.Chat.on_tool_result" id="toc-chatlas.Chat.on_tool_result" class="nav-link" data-scroll-target="#chatlas.Chat.on_tool_result">on_tool_result</a></li>
  <li><a href="#chatlas.Chat.register_mcp_tools_http_stream_async" id="toc-chatlas.Chat.register_mcp_tools_http_stream_async" class="nav-link" data-scroll-target="#chatlas.Chat.register_mcp_tools_http_stream_async">register_mcp_tools_http_stream_async</a></li>
  <li><a href="#chatlas.Chat.register_mcp_tools_stdio_async" id="toc-chatlas.Chat.register_mcp_tools_stdio_async" class="nav-link" data-scroll-target="#chatlas.Chat.register_mcp_tools_stdio_async">register_mcp_tools_stdio_async</a></li>
  <li><a href="#chatlas.Chat.register_tool" id="toc-chatlas.Chat.register_tool" class="nav-link" data-scroll-target="#chatlas.Chat.register_tool">register_tool</a></li>
  </ul></li>
  <li><a href="#parameters-16" id="toc-parameters-16" class="nav-link" data-scroll-target="#parameters-16">Parameters</a></li>
  <li><a href="#raises-1" id="toc-raises-1" class="nav-link" data-scroll-target="#raises-1">Raises</a>
  <ul class="collapse">
  <li><a href="#chatlas.Chat.set_echo_options" id="toc-chatlas.Chat.set_echo_options" class="nav-link" data-scroll-target="#chatlas.Chat.set_echo_options">set_echo_options</a></li>
  <li><a href="#chatlas.Chat.set_model_params" id="toc-chatlas.Chat.set_model_params" class="nav-link" data-scroll-target="#chatlas.Chat.set_model_params">set_model_params</a></li>
  <li><a href="#chatlas.Chat.set_tools" id="toc-chatlas.Chat.set_tools" class="nav-link" data-scroll-target="#chatlas.Chat.set_tools">set_tools</a></li>
  <li><a href="#chatlas.Chat.set_turns" id="toc-chatlas.Chat.set_turns" class="nav-link" data-scroll-target="#chatlas.Chat.set_turns">set_turns</a></li>
  <li><a href="#chatlas.Chat.stream" id="toc-chatlas.Chat.stream" class="nav-link" data-scroll-target="#chatlas.Chat.stream">stream</a></li>
  <li><a href="#chatlas.Chat.stream_async" id="toc-chatlas.Chat.stream_async" class="nav-link" data-scroll-target="#chatlas.Chat.stream_async">stream_async</a></li>
  <li><a href="#chatlas.Chat.token_count" id="toc-chatlas.Chat.token_count" class="nav-link" data-scroll-target="#chatlas.Chat.token_count">token_count</a></li>
  <li><a href="#chatlas.Chat.token_count_async" id="toc-chatlas.Chat.token_count_async" class="nav-link" data-scroll-target="#chatlas.Chat.token_count_async">token_count_async</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/posit-dev/chatlas/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/posit-dev/chatlas/edit/main/docs/reference/Chat.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="chatlas.Chat" class="level1">
<h1>Chat</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Chat(provider, system_prompt<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A chat object that can be used to interact with a language model.</p>
<p>A <code>Chat</code> is an sequence of sequence of user and assistant <a href="https://posit-dev.github.io/chatlas/reference/Turn.html#chatlas.Turn"><code>Turn</code></a>s sent to a specific <a href="https://posit-dev.github.io/chatlas/reference/Provider.html#chatlas.Provider"><code>Provider</code></a>. A <code>Chat</code> takes care of managing the state associated with the chat; i.e.&nbsp;it records the messages that you send to the server, and the messages that you receive back. If you register a tool (i.e.&nbsp;an function that the assistant can call on your behalf), it also takes care of the tool loop.</p>
<p>You should generally not create this object yourself, but instead call <a href="https://posit-dev.github.io/chatlas/reference/ChatOpenAI.html#chatlas.ChatOpenAI"><code>ChatOpenAI</code></a> or friends instead.</p>
<section id="attributes" class="level2">
<h2 class="anchored" data-anchor-id="attributes">Attributes</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#chatlas.Chat.current_display">current_display</a></td>
<td>Get the currently active markdown display, if any.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.system_prompt">system_prompt</a></td>
<td>A property to get (or set) the system prompt for the chat.</td>
</tr>
</tbody>
</table>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="#chatlas.Chat.add_turn">add_turn</a></td>
<td>Add a turn to the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.app">app</a></td>
<td>Enter a web-based chat app to interact with the LLM.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.chat">chat</a></td>
<td>Generate a response from the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.chat_async">chat_async</a></td>
<td>Generate a response from the chat asynchronously.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.cleanup_mcp_tools">cleanup_mcp_tools</a></td>
<td>Close MCP server connections (and their corresponding tools).</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.console">console</a></td>
<td>Enter a chat console to interact with the LLM.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.export">export</a></td>
<td>Export the chat history to a file.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.extract_data">extract_data</a></td>
<td>Extract structured data from the given input.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.extract_data_async">extract_data_async</a></td>
<td>Extract structured data from the given input asynchronously.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.get_cost">get_cost</a></td>
<td>Estimate the cost of the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.get_last_turn">get_last_turn</a></td>
<td>Get the last turn in the chat with a specific role.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.get_tokens">get_tokens</a></td>
<td>Get the tokens for each turn in the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.get_tools">get_tools</a></td>
<td>Get the list of registered tools.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.get_turns">get_turns</a></td>
<td>Get all the turns (i.e., message contents) in the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.on_tool_request">on_tool_request</a></td>
<td>Register a callback for a tool request event.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.on_tool_result">on_tool_result</a></td>
<td>Register a callback for a tool result event.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.register_mcp_tools_http_stream_async">register_mcp_tools_http_stream_async</a></td>
<td>Register tools from an MCP server using streamable HTTP transport.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.register_mcp_tools_stdio_async">register_mcp_tools_stdio_async</a></td>
<td>Register tools from a MCP server using stdio (standard input/output) transport.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.register_tool">register_tool</a></td>
<td>Register a tool (function) with the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.set_echo_options">set_echo_options</a></td>
<td>Set echo styling options for the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.set_model_params">set_model_params</a></td>
<td>Set common model parameters for the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.set_tools">set_tools</a></td>
<td>Set the tools for the chat.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.set_turns">set_turns</a></td>
<td>Set the turns of the chat.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.stream">stream</a></td>
<td>Generate a response from the chat in a streaming fashion.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.stream_async">stream_async</a></td>
<td>Generate a response from the chat in a streaming fashion asynchronously.</td>
</tr>
<tr class="even">
<td><a href="#chatlas.Chat.token_count">token_count</a></td>
<td>Get an estimated token count for the given input.</td>
</tr>
<tr class="odd">
<td><a href="#chatlas.Chat.token_count_async">token_count_async</a></td>
<td>Get an estimated token count for the given input asynchronously.</td>
</tr>
</tbody>
</table>
<section id="chatlas.Chat.add_turn" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.add_turn">add_turn</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Chat.add_turn(turn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Add a turn to the chat.</p>
<section id="parameters" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>turn</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/Turn.html#chatlas.Turn">Turn</a></td>
<td>The turn to add. Turns with the role “system” are not allowed.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.app" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.app">app</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Chat.app(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    stream<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    port<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    host<span class="op">=</span><span class="st">'127.0.0.1'</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    launch_browser<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    bg_thread<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    echo<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    content<span class="op">=</span><span class="st">'all'</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Enter a web-based chat app to interact with the LLM.</p>
<section id="parameters-1" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-1">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>port</td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a></td>
<td>The port to run the app on (the default is 0, which will choose a random port).</td>
<td><code>0</code></td>
</tr>
<tr class="odd">
<td>host</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The host to run the app on (the default is “127.0.0.1”).</td>
<td><code>'127.0.0.1'</code></td>
</tr>
<tr class="even">
<td>launch_browser</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to launch a browser window.</td>
<td><code>True</code></td>
</tr>
<tr class="odd">
<td>bg_thread</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</td>
<td>Whether to run the app in a background thread. If <code>None</code>, the app will run in a background thread if the current environment is a notebook.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<code>EchoOptions</code>]</td>
<td>One of the following (defaults to <code>"none"</code> when <code>stream=True</code> and <code>"text"</code> when <code>stream=False</code>): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>content</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all']</td>
<td>Whether to display text content or all content (i.e., tool calls).</td>
<td><code>'all'</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.chat" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.chat">chat</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Chat.chat(<span class="op">*</span>args, echo<span class="op">=</span><span class="st">'output'</span>, stream<span class="op">=</span><span class="va">True</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat.</p>
<section id="parameters-2" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-2">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “output”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'output'</code></td>
</tr>
<tr class="odd">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.ChatResponse.html#chatlas.types.ChatResponse">ChatResponse</a></td>
<td>A (consumed) response from the chat. Apply <code>str()</code> to this object to get the text content of the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.chat_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.chat_async">chat_async</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Chat.chat_async(<span class="op">*</span>args, echo<span class="op">=</span><span class="st">'output'</span>, stream<span class="op">=</span><span class="va">True</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat asynchronously.</p>
<section id="parameters-3" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-3">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “output”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'output'</code></td>
</tr>
<tr class="odd">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-1" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-1">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.ChatResponseAsync.html#chatlas.types.ChatResponseAsync">ChatResponseAsync</a></td>
<td>A (consumed) response from the chat. Apply <code>str()</code> to this object to get the text content of the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.cleanup_mcp_tools" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.cleanup_mcp_tools">cleanup_mcp_tools</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Chat.cleanup_mcp_tools(names<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Close MCP server connections (and their corresponding tools).</p>
<p>This method closes the MCP client sessions and removes the tools registered from the MCP servers. If a specific <code>name</code> is provided, it will only clean up the tools and session associated with that name. If no name is provided, it will clean up all registered MCP tools and sessions.</p>
<section id="parameters-4" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-4">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>names</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</td>
<td>If provided, only clean up the tools and session associated with these names. If not provided, clean up all registered MCP tools and sessions.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-2" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-2">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>None</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.console" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.console">console</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>Chat.console(echo<span class="op">=</span><span class="st">'output'</span>, stream<span class="op">=</span><span class="va">True</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Enter a chat console to interact with the LLM.</p>
<p>To quit, input ‘exit’ or press Ctrl+C.</p>
<section id="parameters-5" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-5">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “output”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'output'</code></td>
</tr>
<tr class="even">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>True</code></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-3" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-3">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>None</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.export" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.export">export</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Chat.export(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    filename,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    turns<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    content<span class="op">=</span><span class="st">'text'</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    include_system_prompt<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    overwrite<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Export the chat history to a file.</p>
<section id="parameters-6" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-6">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>filename</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></td>
<td>The filename to export the chat to. Currently this must be a <code>.md</code> or <code>.html</code> file.</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>turns</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://posit-dev.github.io/chatlas/reference/Turn.html#chatlas.Turn">Turn</a>]]</td>
<td>The <code>.get_turns()</code> to export. If not provided, the chat’s current turns will be used.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>title</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>A title to place at the top of the exported file.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>overwrite</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to overwrite the file if it already exists.</td>
<td><code>False</code></td>
</tr>
<tr class="odd">
<td>content</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all']</td>
<td>Whether to include text content, all content (i.e., tool calls), or no content.</td>
<td><code>'text'</code></td>
</tr>
<tr class="even">
<td>include_system_prompt</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to include the system prompt in a </td>
<td><code>True</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-4" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-4">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a></td>
<td>The path to the exported file.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.extract_data" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.extract_data">extract_data</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Chat.extract_data(<span class="op">*</span>args, data_model, echo<span class="op">=</span><span class="st">'none'</span>, stream<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Extract structured data from the given input.</p>
<section id="parameters-7" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-7">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to extract data from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]</td>
<td>A Pydantic model describing the structure of the data to extract.</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “none”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="even">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks).</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-5" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-5">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</td>
<td>The extracted data.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.extract_data_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.extract_data_async">extract_data_async</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Chat.extract_data_async(<span class="op">*</span>args, data_model, echo<span class="op">=</span><span class="st">'none'</span>, stream<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Extract structured data from the given input asynchronously.</p>
<section id="parameters-8" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-8">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to extract data from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]</td>
<td>A Pydantic model describing the structure of the data to extract.</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “none”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="even">
<td>stream</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to stream the response (i.e., have the response appear in chunks). Defaults to <code>True</code> if <code>echo</code> is not “none”.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-6" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-6">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]</td>
<td>The extracted data.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_cost" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_cost">get_cost</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Chat.get_cost(options<span class="op">=</span><span class="st">'all'</span>, token_price<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Estimate the cost of the chat.</p>
<section id="note" class="level4 doc-section doc-section-note">
<h4 class="doc-section doc-section-note anchored" data-anchor-id="note">Note</h4>
<p>This is a rough estimate, treat it as such. Providers may change their pricing frequently and without notice.</p>
</section>
<section id="parameters-9" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-9">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>options</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['all', 'last']</td>
<td>One of the following (default is “all”): - <code>"all"</code>: Return the total cost of all turns in the chat. - <code>"last"</code>: Return the cost of the last turn in the chat.</td>
<td><code>'all'</code></td>
</tr>
<tr class="even">
<td>token_price</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a href="https://docs.python.org/3/library/functions.html#float">float</a>, <a href="https://docs.python.org/3/library/functions.html#float">float</a>, <a href="https://docs.python.org/3/library/functions.html#float">float</a>]]</td>
<td>An optional tuple in the format of (input_token_cost, output_token_cost, cached_token_cost) for bringing your own cost information. - <code>"input_token_cost"</code>: The cost per user token in USD per million tokens. - <code>"output_token_cost"</code>: The cost per assistant token in USD per million tokens. - <code>"cached_token_cost"</code>: The cost per cached token read in USD per million tokens.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-7" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-7">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/functions.html#float">float</a></td>
<td>The cost of the chat, in USD.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_last_turn" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_last_turn">get_last_turn</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Chat.get_last_turn(role<span class="op">=</span><span class="st">'assistant'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get the last turn in the chat with a specific role.</p>
<section id="parameters-10" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-10">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>role</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['assistant', 'user', 'system']</td>
<td>The role of the turn to return.</td>
<td><code>'assistant'</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_tokens" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_tokens">get_tokens</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Chat.get_tokens()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get the tokens for each turn in the chat.</p>
<section id="returns-8" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-8">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<code>TokensDict</code>]</td>
<td>A list of dictionaries with the token counts for each (non-system) turn</td>
</tr>
</tbody>
</table>
</section>
<section id="raises" class="level4 doc-section doc-section-raises">
<h4 class="doc-section doc-section-raises anchored" data-anchor-id="raises">Raises</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></td>
<td>If the chat’s turns (i.e., <code>.get_turns()</code>) are not in an expected format. This may happen if the chat history is manually set (i.e., <code>.set_turns()</code>). In this case, you can inspect the “raw” token values via the <code>.get_turns()</code> method (each turn has a <code>.tokens</code> attribute).</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_tools" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_tools">get_tools</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Chat.get_tools()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get the list of registered tools.</p>
<section id="returns-9" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-9">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a href="https://posit-dev.github.io/chatlas/reference/Tool.html#chatlas.Tool">Tool</a>]</td>
<td>A list of <code>Tool</code> instances that are currently registered with the chat.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.get_turns" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.get_turns">get_turns</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>Chat.get_turns(include_system_prompt<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get all the turns (i.e., message contents) in the chat.</p>
<section id="parameters-11" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-11">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>include_system_prompt</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></td>
<td>Whether to include the system prompt in the turns.</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.on_tool_request" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.on_tool_request">on_tool_request</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Chat.on_tool_request(callback)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register a callback for a tool request event.</p>
<p>A tool request event occurs when the assistant requests a tool to be called on its behalf. Before invoking the tool, <code>on_tool_request</code> handlers are called with the relevant <code>ContentToolRequest</code> object. This is useful if you want to handle tool requests in a custom way, such as requiring logging them or requiring user approval before invoking the tool</p>
<section id="parameters-12" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-12">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>callback</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a href="https://posit-dev.github.io/chatlas/reference/types.ContentToolRequest.html#chatlas.types.ContentToolRequest">ContentToolRequest</a>], None]</td>
<td>A function to be called when a tool request event occurs. This function must have a single argument, which will be the tool request (i.e., a <code>ContentToolRequest</code> object).</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-10" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-10">Returns</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 71%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>A callable that can be used to remove the callback later.</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.on_tool_result" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.on_tool_result">on_tool_result</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>Chat.on_tool_result(callback)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register a callback for a tool result event.</p>
<p>A tool result event occurs when a tool has been invoked and the result is ready to be provided to the assistant. After the tool has been invoked, <code>on_tool_result</code> handlers are called with the relevant <code>ContentToolResult</code> object. This is useful if you want to handle tool results in a custom way such as logging them.</p>
<section id="parameters-13" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-13">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>callback</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[[<a href="https://posit-dev.github.io/chatlas/reference/types.ContentToolResult.html#chatlas.types.ContentToolResult">ContentToolResult</a>], None]</td>
<td>A function to be called when a tool result event occurs. This function must have a single argument, which will be the tool result (i.e., a <code>ContentToolResult</code> object).</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-11" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-11">Returns</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 9%">
<col style="width: 71%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>A callable that can be used to remove the callback later.</td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.register_mcp_tools_http_stream_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.register_mcp_tools_http_stream_async">register_mcp_tools_http_stream_async</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Chat.register_mcp_tools_http_stream_async(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    url,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    include_tools<span class="op">=</span>(),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    exclude_tools<span class="op">=</span>(),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    namespace<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    transport_kwargs<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register tools from an MCP server using streamable HTTP transport.</p>
<p>Connects to an MCP server (that communicates over a streamable HTTP transport) and registers the available tools. This is useful for utilizing tools provided by an MCP server running on a remote server (or locally) over HTTP.</p>
<section id="pre-requisites" class="level4 doc-section doc-section-pre-requisites">
<h4 class="doc-section doc-section-pre-requisites anchored" data-anchor-id="pre-requisites">Pre-requisites</h4>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Requires the <code>mcp</code> package to be installed. Install it with:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install mcp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="parameters-14" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-14">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>url</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>URL endpoint where the Streamable HTTP server is mounted (e.g., <code>http://localhost:8000/mcp</code>)</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>name</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>A unique name for the MCP server session. If not provided, the name is derived from the MCP server information. This name is primarily useful for cleanup purposes (i.e., to close a particular MCP session).</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>include_tools</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>List of tool names to include. By default, all available tools are included.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>exclude_tools</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>List of tool names to exclude. This parameter and <code>include_tools</code> are mutually exclusive.</td>
<td><code>()</code></td>
</tr>
<tr class="odd">
<td>namespace</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>A namespace to prepend to tool names (i.e., <code>namespace.tool_name</code>) from this MCP server. This is primarily useful to avoid name collisions with other tools already registered with the chat. This namespace applies when tools are advertised to the LLM, so try to use a meaningful name that describes the server and/or the tools it provides. For example, if you have a server that provides tools for mathematical operations, you might use <code>math</code> as the namespace.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>transport_kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</td>
<td>Additional keyword arguments for the transport layer (i.e., <code>mcp.client.streamable_http.streamablehttp_client</code>).</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-12" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-12">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>None</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="see-also" class="level4 doc-section doc-section-see-also">
<h4 class="doc-section doc-section-see-also anchored" data-anchor-id="see-also">See Also</h4>
<ul>
<li><code>.cleanup_mcp_tools_async()</code> : Cleanup registered MCP tools.</li>
<li><code>.register_mcp_tools_stdio_async()</code> : Register tools from an MCP server using stdio transport.</li>
</ul>
</section>
<section id="note-1" class="level4 doc-section doc-section-note">
<h4 class="doc-section doc-section-note anchored" data-anchor-id="note-1">Note</h4>
<p>Unlike the <code>.register_mcp_tools_stdio_async()</code> method, this method does not launch an MCP server. Instead, it assumes an HTTP server is already running at the specified URL. This is useful for connecting to an existing MCP server that is already running and serving tools.</p>
</section>
<section id="examples" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples">Examples</h4>
<p>Assuming you have a Python script <code>my_mcp_server.py</code> that implements an MCP server like so:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mcp.server.fastmcp <span class="im">import</span> FastMCP</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> FastMCP(<span class="st">"my_server"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="at">@app.tool</span>(description<span class="op">=</span><span class="st">"Add two numbers."</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(x: <span class="bu">int</span>, y: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>app.run(transport<span class="op">=</span><span class="st">"streamable-http"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can launch this server like so:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> my_mcp_server.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, you can register this server with the chat as follows:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> chat.register_mcp_tools_http_stream_async(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    url<span class="op">=</span><span class="st">"http://localhost:8080/mcp"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="chatlas.Chat.register_mcp_tools_stdio_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.register_mcp_tools_stdio_async">register_mcp_tools_stdio_async</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>Chat.register_mcp_tools_stdio_async(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    command,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    args,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    include_tools<span class="op">=</span>(),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    exclude_tools<span class="op">=</span>(),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    namespace<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    transport_kwargs<span class="op">=</span><span class="va">None</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register tools from a MCP server using stdio (standard input/output) transport.</p>
<p>Useful for launching an MCP server and registering its tools with the chat – all from the same Python process.</p>
<p>In more detail, this method:</p>
<ol type="1">
<li>Executes the given <code>command</code> with the provided <code>args</code>.
<ul>
<li>This should start an MCP server that communicates via stdio.</li>
</ul></li>
<li>Establishes a client connection to the MCP server using the <code>mcp</code> package.</li>
<li>Registers the available tools from the MCP server with the chat.</li>
<li>Returns a cleanup callback to close the MCP session and remove the tools.</li>
</ol>
<section id="pre-requisites-1" class="level4 doc-section doc-section-pre-requisites">
<h4 class="doc-section doc-section-pre-requisites anchored" data-anchor-id="pre-requisites-1">Pre-requisites</h4>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Requires the <code>mcp</code> package to be installed. Install it with:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install mcp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="parameters-15" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-15">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>command</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>System command to execute to start the MCP server (e.g., <code>python</code>).</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td>args</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>Arguments to pass to the system command (e.g., <code>["-m", "my_mcp_server"]</code>).</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td>name</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>A unique name for the MCP server session. If not provided, the name is derived from the MCP server information. This name is primarily useful for cleanup purposes (i.e., to close a particular MCP session).</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>include_tools</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>List of tool names to include. By default, all available tools are included.</td>
<td><code>()</code></td>
</tr>
<tr class="odd">
<td>exclude_tools</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>List of tool names to exclude. This parameter and <code>include_tools</code> are mutually exclusive.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>namespace</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</td>
<td>A namespace to prepend to tool names (i.e., <code>namespace.tool_name</code>) from this MCP server. This is primarily useful to avoid name collisions with other tools already registered with the chat. This namespace applies when tools are advertised to the LLM, so try to use a meaningful name that describes the server and/or the tools it provides. For example, if you have a server that provides tools for mathematical operations, you might use <code>math</code> as the namespace.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>transport_kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</td>
<td>Additional keyword arguments for the stdio transport layer (i.e., <code>mcp.client.stdio.stdio_client</code>).</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-13" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-13">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td>None</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="see-also-1" class="level4 doc-section doc-section-see-also">
<h4 class="doc-section doc-section-see-also anchored" data-anchor-id="see-also-1">See Also</h4>
<ul>
<li><code>.cleanup_mcp_tools_async()</code> : Cleanup registered MCP tools.</li>
<li><code>.register_mcp_tools_http_stream_async()</code> : Register tools from an MCP server using streamable HTTP transport.</li>
</ul>
</section>
<section id="examples-1" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-1">Examples</h4>
<p>Assuming you have a Python script <code>my_mcp_server.py</code> that implements an MCP server like so</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mcp.server.fastmcp <span class="im">import</span> FastMCP</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> FastMCP(<span class="st">"my_server"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="at">@app.tool</span>(description<span class="op">=</span><span class="st">"Add two numbers."</span>)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(y: <span class="bu">int</span>, z: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> y <span class="op">-</span> z</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>app.run(transport<span class="op">=</span><span class="st">"stdio"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can register this server with the chat as follows:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatOpenAI</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatOpenAI()</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> chat.register_mcp_tools_stdio_async(</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    command<span class="op">=</span><span class="st">"python"</span>,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    args<span class="op">=</span>[<span class="st">"-m"</span>, <span class="st">"my_mcp_server"</span>],</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="chatlas.Chat.register_tool" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.register_tool">register_tool</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>Chat.register_tool(func, <span class="op">*</span>, force<span class="op">=</span><span class="va">False</span>, model<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register a tool (function) with the chat.</p>
<p>The function will always be invoked in the current Python process.</p>
<section id="examples-2" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-2">Examples</h4>
<p>If your tool has straightforward input parameters, you can just register the function directly (type hints and a docstring explaning both what the function does and what the parameters are for is strongly recommended):</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatOpenAI</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a: <span class="bu">int</span>, b: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">    Add two numbers together.</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="co">####     Parameters {.doc-section .doc-section-----parameters}</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co">    a : int</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="co">        The first number to add.</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="co">    b : int</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co">        The second number to add.</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatOpenAI()</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>chat.register_tool(add)</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>chat.chat(<span class="st">"What is 2 + 2?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If your tool has more complex input parameters, you can provide a Pydantic model that corresponds to the input parameters for the function, This way, you can have fields that hold other model(s) (for more complex input parameters), and also more directly document the input parameters:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatOpenAI</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, Field</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AddParams(BaseModel):</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Add two numbers together.'''</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    a: <span class="bu">int</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"The first number to add."</span>)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    b: <span class="bu">int</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"The second number to add."</span>)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a: <span class="bu">int</span>, b: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatOpenAI()</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>chat.register_tool(add, model<span class="op">=</span>AddParams)</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>chat.chat(<span class="st">"What is 2 + 2?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="parameters-16" class="level2">
<h2 class="anchored" data-anchor-id="parameters-16">Parameters</h2>
<p>func The function to be invoked when the tool is called. force If <code>True</code>, overwrite any existing tool with the same name. If <code>False</code> (the default), raise an error if a tool with the same name already exists. model A Pydantic model that describes the input parameters for the function. If not provided, the model will be inferred from the function’s type hints. The primary reason why you might want to provide a model in Note that the name and docstring of the model takes precedence over the name and docstring of the function.</p>
</section>
<section id="raises-1" class="level2">
<h2 class="anchored" data-anchor-id="raises-1">Raises</h2>
<p>ValueError If a tool with the same name already exists and <code>force</code> is <code>False</code>.</p>
<section id="chatlas.Chat.set_echo_options" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.set_echo_options">set_echo_options</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Chat.set_echo_options(rich_markdown<span class="op">=</span><span class="va">None</span>, rich_console<span class="op">=</span><span class="va">None</span>, css_styles<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Set echo styling options for the chat.</p>
<section id="parameters-17" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-17">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>rich_markdown</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</td>
<td>A dictionary of options to pass to <code>rich.markdown.Markdown()</code>. This is only relevant when outputting to the console.</td>
<td><code>None</code></td>
</tr>
<tr class="even">
<td>rich_console</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]]</td>
<td>A dictionary of options to pass to <code>rich.console.Console()</code>. This is only relevant when outputting to the console.</td>
<td><code>None</code></td>
</tr>
<tr class="odd">
<td>css_styles</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]]</td>
<td>A dictionary of CSS styles to apply to <code>IPython.display.Markdown()</code>. This is only relevant when outputing to the browser.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.set_model_params" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.set_model_params">set_model_params</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>Chat.set_model_params(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    temperature<span class="op">=</span>MISSING,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    top_p<span class="op">=</span>MISSING,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    top_k<span class="op">=</span>MISSING,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    frequency_penalty<span class="op">=</span>MISSING,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    presence_penalty<span class="op">=</span>MISSING,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    seed<span class="op">=</span>MISSING,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    max_tokens<span class="op">=</span>MISSING,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    log_probs<span class="op">=</span>MISSING,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    stop_sequences<span class="op">=</span>MISSING,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    kwargs<span class="op">=</span>MISSING,</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Set common model parameters for the chat.</p>
<p>A unified interface for setting common model parameters across different providers. This method is useful for setting parameters that are commonly supported by most providers, such as temperature, top_p, etc.</p>
<p>By default, if the parameter is not set (i.e., set to <code>MISSING</code>), the provider’s default value is used. If you want to reset a parameter to its default value, set it to <code>None</code>.</p>
<section id="parameters-18" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-18">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>temperature</td>
<td><a href="https://docs.python.org/3/library/functions.html#float">float</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Temperature of the sampling distribution.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="even">
<td>top_p</td>
<td><a href="https://docs.python.org/3/library/functions.html#float">float</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>The cumulative probability for token selection.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="odd">
<td>top_k</td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>The number of highest probability vocabulary tokens to keep.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="even">
<td>frequency_penalty</td>
<td><a href="https://docs.python.org/3/library/functions.html#float">float</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Frequency penalty for generated tokens.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="odd">
<td>presence_penalty</td>
<td><a href="https://docs.python.org/3/library/functions.html#float">float</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Presence penalty for generated tokens.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="even">
<td>seed</td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Seed for random number generator.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="odd">
<td>max_tokens</td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Maximum number of tokens to generate.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="even">
<td>log_probs</td>
<td><a href="https://docs.python.org/3/library/functions.html#bool">bool</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Include the log probabilities in the output?</td>
<td><code>MISSING</code></td>
</tr>
<tr class="odd">
<td>stop_sequences</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>A character vector of tokens to stop generation on.</td>
<td><code>MISSING</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a> | None | <a href="https://posit-dev.github.io/chatlas/reference/types.MISSING_TYPE.html#chatlas.types.MISSING_TYPE">MISSING_TYPE</a></td>
<td>Additional keyword arguments to use when submitting input to the model. When calling this method repeatedly with different parameters, only the parameters from the last call will be used.</td>
<td><code>MISSING</code></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.set_tools" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.set_tools">set_tools</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>Chat.set_tools(tools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Set the tools for the chat.</p>
<p>This replaces any previously registered tools with the provided list of tools. This is for advanced usage – typically, you would use <code>.register_tool()</code> to register individual tools as needed.</p>
<section id="parameters-19" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-19">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tools</td>
<td><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[…, <a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>] | <a href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>[…, <a href="https://docs.python.org/3/library/typing.html#typing.Awaitable">Awaitable</a>[<a href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a>]] | <a href="https://posit-dev.github.io/chatlas/reference/Tool.html#chatlas.Tool">Tool</a>]</td>
<td>A list of <code>Tool</code> instances to set as the chat’s tools.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.set_turns" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.set_turns">set_turns</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Chat.set_turns(turns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Set the turns of the chat.</p>
<p>Replaces the current chat history state (i.e., turns) with the provided turns. This can be useful for: * Clearing (or trimming) the chat history (i.e., <code>.set_turns([])</code>). * Restoring context from a previous chat.</p>
<section id="parameters-20" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-20">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>turns</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a href="https://posit-dev.github.io/chatlas/reference/Turn.html#chatlas.Turn">Turn</a>]</td>
<td>The turns to set. Turns with the role “system” are not allowed.</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.stream" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.stream">stream</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>Chat.stream(<span class="op">*</span>args, content<span class="op">=</span><span class="st">'text'</span>, echo<span class="op">=</span><span class="st">'none'</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat in a streaming fashion.</p>
<section id="parameters-21" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-21">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>content</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all']</td>
<td>Whether to yield just text content or include rich content objects (e.g., tool calls) when relevant.</td>
<td><code>'text'</code></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “none”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-14" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-14">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.ChatResponse.html#chatlas.types.ChatResponse">ChatResponse</a></td>
<td>An (unconsumed) response from the chat. Iterate over this object to consume the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.stream_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.stream_async">stream_async</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>Chat.stream_async(<span class="op">*</span>args, content<span class="op">=</span><span class="st">'text'</span>, echo<span class="op">=</span><span class="st">'none'</span>, kwargs<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Generate a response from the chat in a streaming fashion asynchronously.</p>
<section id="parameters-22" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-22">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The user input(s) to generate a response from.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>content</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Literal">Literal</a>['text', 'all']</td>
<td>Whether to yield just text content or include rich content objects (e.g., tool calls) when relevant.</td>
<td><code>'text'</code></td>
</tr>
<tr class="odd">
<td>echo</td>
<td><code>EchoOptions</code></td>
<td>One of the following (default is “none”): - <code>"text"</code>: Echo just the text content of the response. - <code>"output"</code>: Echo text and tool call content. - <code>"all"</code>: Echo both the assistant and user turn. - <code>"none"</code>: Do not echo any content.</td>
<td><code>'none'</code></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://posit-dev.github.io/chatlas/reference/types.SubmitInputArgsT.html#chatlas.types.SubmitInputArgsT">SubmitInputArgsT</a>]</td>
<td>Additional keyword arguments to pass to the method used for requesting the response.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-15" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-15">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.ChatResponseAsync.html#chatlas.types.ChatResponseAsync">ChatResponseAsync</a></td>
<td>An (unconsumed) response from the chat. Iterate over this object to consume the response.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="chatlas.Chat.token_count" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.token_count">token_count</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>Chat.token_count(<span class="op">*</span>args, data_model<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get an estimated token count for the given input.</p>
<p>Estimate the token size of input content. This can help determine whether input(s) and/or conversation history (i.e., <code>.get_turns()</code>) should be reduced in size before sending it to the model.</p>
<section id="parameters-23" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-23">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to get a token count for.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]]</td>
<td>If the input is meant for data extraction (i.e., <code>.extract_data()</code>), then this should be the Pydantic model that describes the structure of the data to extract.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-16" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-16">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a></td>
<td>The token count for the input.</td>
</tr>
</tbody>
</table>
</section>
<section id="note-2" class="level4 doc-section doc-section-note">
<h4 class="doc-section doc-section-note anchored" data-anchor-id="note-2">Note</h4>
<p>Remember that the token count is an estimate. Also, models based on <code>ChatOpenAI()</code> currently does not take tools into account when estimating token counts.</p>
</section>
<section id="examples-3" class="level4 doc-section doc-section-examples">
<h4 class="doc-section doc-section-examples anchored" data-anchor-id="examples-3">Examples</h4>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> chatlas <span class="im">import</span> ChatAnthropic</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>chat <span class="op">=</span> ChatAnthropic()</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimate the token count before sending the input</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(chat.token_count(<span class="st">"What is 2 + 2?"</span>))</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Once input is sent, you can get the actual input and output</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># token counts from the chat object</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>chat.chat(<span class="st">"What is 2 + 2?"</span>, echo<span class="op">=</span><span class="st">"none"</span>)</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(chat.token_usage())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="chatlas.Chat.token_count_async" class="level3">
<h3 class="anchored" data-anchor-id="chatlas.Chat.token_count_async">token_count_async</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>Chat.token_count_async(<span class="op">*</span>args, data_model<span class="op">=</span><span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Get an estimated token count for the given input asynchronously.</p>
<p>Estimate the token size of input content. This can help determine whether input(s) and/or conversation history (i.e., <code>.get_turns()</code>) should be reduced in size before sending it to the model.</p>
<section id="parameters-24" class="level4 doc-section doc-section-parameters">
<h4 class="doc-section doc-section-parameters anchored" data-anchor-id="parameters-24">Parameters</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>args</td>
<td><a href="https://posit-dev.github.io/chatlas/reference/types.Content.html#chatlas.types.Content">Content</a> | <a href="https://docs.python.org/3/library/stdtypes.html#str">str</a></td>
<td>The input to get a token count for.</td>
<td><code>()</code></td>
</tr>
<tr class="even">
<td>data_model</td>
<td><a href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a href="https://docs.python.org/3/library/functions.html#type">type</a>[<a href="https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel">BaseModel</a>]]</td>
<td>If this input is meant for data extraction (i.e., <code>.extract_data_async()</code>), then this should be the Pydantic model that describes the structure of the data to extract.</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
</section>
<section id="returns-17" class="level4 doc-section doc-section-returns">
<h4 class="doc-section doc-section-returns anchored" data-anchor-id="returns-17">Returns</h4>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td><a href="https://docs.python.org/3/library/functions.html#int">int</a></td>
<td>The token count for the input.</td>
</tr>
</tbody>
</table>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/posit-dev\.github\.io\/chatlas\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../reference/ChatVertex.html" class="pagination-link" aria-label="ChatVertex">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">ChatVertex</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../reference/content_image_file.html" class="pagination-link" aria-label="content_image_file">
        <span class="nav-page-text">content_image_file</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Proudly supported by <a href="https://posit.co"><img src="https://posit.co/wp-content/uploads/2024/06/Posit-Logos-2024_horiz-full-color.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/posit-dev/chatlas/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/posit-dev/chatlas/edit/main/docs/reference/Chat.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>